---
title: "Building a classifier to predicting house age"
author: "Anonymous"
format: 
  html:
    embed-resources: true
---

## The Problem

Data on [Energy Certificates](https://epc.opendatacommunities.org/) were downloaded in March 2025. These certificates are a non-random sample of UK housing, and contain information such as property energy efficiency, CO2 emissions, energy costs, and improvement recommendations. In total, there are 93 variables available on a wide range of metrics.

Reducing the carbon footprint of UK housing is an increasingly important endeavor as global temperatures rise. In attempting to achieve this, it is important to develop a strategy that offers the right solutions to the right properties. It is widely believed that houses build before 1930 require very different approaches to houses built after that period. Therefore, this project will aim to determine whether it is possible to determine the age of a house based on several recorded energy metrics. These metrics are:

-   `current_energy_efficiency`

-   `environment_impact_current`

-   `energy_consumption_current`

-   `co2_emissions_current`

-   `lighting_cost_current`

-   `heating_cost_current`

-   `hot_water_cost_current`

This project will use data for all certificates issued in a single local authority area, with the aim of helping this local authority to identify the right targets by just using metrics. This means they will not be required to visit a the property to determine its age, saving on time and money.

## The Data

```{python}
#| echo: false
import pandas as pd
```

Below are the frequencies of the pre- and post-1930s houses, along with the group means, SDs, minimums, maximums, and quartiles for each variable:

```{python}
#| echo: false
#| results: 'asis'
df = pd.read_csv('../../data_cache/vignettes/supervised_classification/frequencies.csv')
print(df.round(3).to_markdown(index=False))
```

```{python}
#| echo: false
#| results: 'asis'
df = pd.read_csv('../../data_cache/vignettes/supervised_classification/grouped_stats.csv')
print(df.round(3).to_markdown(index=False))
```

The frequencies of the pre- and post- 1930s houses are both relatively similar which is reassuring as it means the dataset is balanced, something which is important for the classifier later on. The summary statistics are as expected, with pre-1930s houses on average having lower energy efficiency, higher environmental impact (as denoted by a lower score: <https://assets.publishing.service.gov.uk/media/60acff14d3bf7f7380ffb662/Energy_Performance_of_Buildings_Certificates_-_glossary.pdf>), higher energy consumption, higher carbon emissions, and higher heating costs when compared to post-1930s builds. Older and newer houses do appear to have similar average costs for lighting and hot water, which could be due to that these systems are often updated (making them more efficient) in old buildings. Generally SDs are higher in the pre-1930s group, suggesting more variation than the post-1930s houses.

The following a scatterplot matrix of all possible bivariate relationships between variables, coloured by group membership (pre- and post-1930s):

![](../../data_cache/vignettes/supervised_classification/scatterplot.html){width="100%" height="600px"}

This scatterplot matrix shows several expected associations, such as a strong negative relationship between energy consumption and energy efficiency, and a positive relationship between energy efficiency and environmental impact score. More importantly for the task of classifiying, the scatterplots show substantial overlap between the two groups (denoted by blue and red) among all variables. Some variables, particularly carbon emissions and energy consumption, show slightly more separation but this is mostly because the pre-1930s homes constitute many of the extreme high values. The post-1930s homes cluster more tightly, which suggests less variability, something which was also shown by the SDs in the summary statistics.

## Fitting LDA and QDA classifiers

Firstly I carried out Linear Discriminant Analysis (LDA) as a dimension reduction technique, to find new axes that maximise separation between classes and minimise it within. The results of the LDA classifier are below:

```{python}
#| echo: false
#| results: 'asis'
df = pd.read_csv('../../data_cache/vignettes/supervised_classification/lda.csv')
df.rename(columns={"Unnamed: 0": "Category"}, inplace=True)
print(df.round(3).to_markdown(index=False))
```

The LDA classifier achieved an overall accuracy of 0.742, meaning it classified data points correctly 74% of the time. It was slightly better at distinguishing pre-30s homes (F1 = 0.769) compared to post-30s homes (F1 = 0.708) suggesting that older houses have more distinct energy usage and cost patterns. Overall, the results demonstrate that linear separation does exist in the data, but further non-linear models may capture class separation better.

To investigate whether the class separation could be curved rather than linear, I conducted Quadratic Discriminant Analysis (QDA). A table of the results can be found below:

```{python}
#| echo: false
#| results: 'asis'
df = pd.read_csv('../../data_cache/vignettes/supervised_classification/qda.csv')
df.rename(columns={"Unnamed: 0": "Category"}, inplace=True)
print(df.round(3).to_markdown(index=False))
```

(POSSIBLY REWRITE IF RESULTS CHANGE)

The QDA classifier achieved the exact same results as the LDA classifier, meaning it had an accuracy of 0.742 and was better at distinguishing pre-30s homes than post-30s homes. Given the results of this analysis are no better than the LDA results, it is likely that the class separation is linear and not curved. Therefore the QDA classifier is a worse classifier than the LDA classifier as it is more complex, but is not any more accurate.

## ROC curve (and AUC) for two simple classifiers

As a final assessment for the two classifiers, I plotted a ROC curve for both, and found the area under the curve (AUC):

![](../../data_cache/vignettes/supervised_classification/roc.html){width="100%" height="600px"}

The ROC curve itself shows the trade-off between sensitivity and specificity at different thresholds, while the AUC summarises overall performance across all thresholds. A perfect AUC value is 1, while a completely random classifier would get a value of 0.5. The LDA classifier got an AUC of 0.81 which indicates good discriminatory power, suggesting that the energy metrics do contain patterns about the age of houses, despite strong overlap in scatterplots. (REWRITE IF QDA ROC CURVE CHANGES)The QDA classifier also received an AUC of 0.81 which again shows that incorporating non-linear boundaries does not improve performance. Therefore, any underlying separation is linear in nature.

## Record of AI use for MTHM503 supervised coursework

| **Date** | **AI tool used** | **Purpose** | **Prompt** | **Hyperlink to output (where possible)** | **Section of work used for** |
|------------|------------|------------|------------|------------|------------|
| E.g. 15/07/2025 | MS Copilot | To help create an organised essay structure | ‘Generate ideas for structuring an essay on...’ | \[insert link\] | introduction |
|  |  |  |  |  |  |
|  |  |  |  |  |  |
|  |  |  |  |  |  |
|  |  |  |  |  |  |
|  |  |  |  |  |  |
|  |  |  |  |  |  |
|  |  |  |  |  |  |
|  |  |  |  |  |  |
