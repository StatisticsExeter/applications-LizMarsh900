---
title: "Building a classifier to predicting house age"
author: "Anonymous"
format: 
  html:
    embed-resources: true
---

## The Problem

Data on [Energy Certificates](https://epc.opendatacommunities.org/) were downloaded in March 2025. These certificates are a non-random sample of UK housing, and contain information such as property energy efficiency, CO~2~ emissions, energy costs, and improvement recommendations. In total, there are 93 variables available on a wide range of metrics (see glossary of terms at <https://epc.opendatacommunities.org/docs/guidance> for more details).

Reducing the carbon footprint of UK housing is an increasingly important endeavor as global temperatures rise. In attempting to achieve this, it is important to develop a strategy that offers the right solutions to the right properties. It is widely believed that houses build before 1930 require very different approaches to houses built after that period. Therefore, this project will aim to determine whether it is possible to determine the age of a house based on several recorded energy metrics. These metrics are:

-   `current_energy_efficiency`: energy required for heating and lighting (kWh/year) multiplied by fuel costs (£/m^2^);
-   `environment_impact_current`: impact on the environment in terms of CO~2~ emissions; higher scores mean less impact on the environment (lower CO~2~ emissions)
-   `energy_consumption_current`: total energy consumption in a year (kWh/m^2^)
-   `co2_emissions_current`: CO~2~ emissions (tonnes/year)
-   `lighting_cost_current`: estimated yearly energy costs (GBP)
-   `heating_cost_current`: estimated yearly energy costs for heating (GBP)
-   `hot_water_cost_current`: estimated yearly energy costs for hot water (GBP)

This project will use data for all certificates issued in a single local authority area, with the aim of helping this local authority to identify the right targets by just using metrics. This means they will not be required to visit a the property to determine its age, saving on time and money.

## The Data

```{python}
#| echo: false
import pandas as pd
```

Below are the frequencies of the pre- and post-1930s houses, along with the group means, SDs, minimums, maximums, and quartiles for each variable:

```{python}
#| echo: false
#| results: 'asis'
df = pd.read_csv('../../data_cache/vignettes/supervised_classification/frequencies.csv')
print(df.round(3).to_markdown(index=False))
```

```{python}
#| echo: false
#| results: 'asis'
df = pd.read_csv('../../data_cache/vignettes/supervised_classification/grouped_stats.csv')
print(df.round(3).to_markdown(index=False))
```

The frequencies of the pre- and post- 1930s houses are both relatively similar which is reassuring as it means the dataset is balanced, something which is important for the classifier later on. The summary statistics are as expected, with pre-1930s houses on average having lower energy efficiency, higher environmental impact (as denoted by a lower score), higher energy consumption, higher carbon emissions, and higher heating costs when compared to post-1930s builds. Older and newer houses do appear to have similar average costs for lighting and hot water, which could be due to that these systems are often updated (making them more efficient) in old buildings. Generally SDs are higher in the pre-1930s group, suggesting more variation than the post-1930s houses.

The following a scatterplot matrix of all possible bivariate relationships between variables, coloured by group membership (pre- and post-1930s):

![](../../data_cache/vignettes/supervised_classification/scatterplot.html){width="100%" height="600px"}

This scatterplot matrix shows several expected associations, such as a strong negative relationship between energy consumption and energy efficiency, and a positive relationship between energy efficiency and environmental impact score. More importantly for the task of classifiying, the scatterplots show substantial overlap between the two groups (denoted by blue and red) among all variables. Some variables, particularly carbon emissions and energy consumption, show slightly more separation but this is mostly because the pre-1930s homes constitute many of the extreme high values. The post-1930s homes cluster more tightly, which suggests less variability, something which was also shown by the SDs in the summary statistics.

## Fitting LDA and QDA Classifiers

Firstly I carried out Linear Discriminant Analysis (LDA) as a dimension reduction technique, to find new axes that maximise separation between classes and minimise it within. The results of the LDA classifier are below:

```{python}
#| echo: false
#| results: 'asis'
df = pd.read_csv('../../data_cache/vignettes/supervised_classification/lda.csv')
df.rename(columns={"Unnamed: 0": "Category"}, inplace=True)
print(df.round(3).to_markdown(index=False))
```

The LDA classifier achieved an overall accuracy of 0.742, meaning it classified data points correctly 74% of the time. It was slightly better at distinguishing pre-30s homes (F1 = 0.769) compared to post-30s homes (F1 = 0.708) suggesting that older houses have more distinct energy usage and cost patterns. Overall, the results demonstrate that linear separation does exist in the data, but further non-linear models may capture class separation better.

To investigate whether the class separation could be curved rather than linear, I conducted Quadratic Discriminant Analysis (QDA). A table of the results can be found below:

```{python}
#| echo: false
#| results: 'asis'
df = pd.read_csv('../../data_cache/vignettes/supervised_classification/qda.csv')
df.rename(columns={"Unnamed: 0": "Category"}, inplace=True)
print(df.round(3).to_markdown(index=False))
```

The QDA classifier achieved an overall accuracy of 0.621 and was slightly better at distinguishing post-1930s homes (F1 = 0.681) then pre-1930s homes (F1 = 0.534). The classifier performed worse than the LDA classifier in every domain, meaning that the LDA classifier is the better model. This also suggests that the underlying separation between older and newer homes is linear in nature.

## ROC Curve (and AUC) for Two Simple Classifiers

As a final assessment for the two classifiers, I plotted a ROC curve for both, and found the area under the curve (AUC):

![](../../data_cache/vignettes/supervised_classification/roc.html){width="100%" height="600px"}

The ROC curve itself shows the trade-off between sensitivity and specificity at different thresholds, while the AUC summarises overall performance across all thresholds. A perfect AUC value is 1, while a completely random classifier would get a value of 0.5. The LDA classifier got an AUC of 0.81 which indicates good discriminatory power, suggesting that the energy metrics do contain patterns about the age of houses, despite strong overlap in scatterplots. The QDA classifier received an AUC of 0.79 which as expected from the results shows it performs more poorly than the LDA classifier. This again suggests that incorporating non-linear boundaries is not useful in this case, and therefore, any underlying separation is linear in nature.

## Record of AI use for MTHM503 supervised coursework

| **Date** | **AI tool used** | **Purpose** | **Prompt** | **Hyperlink to output (where possible)** | **Section of work used for** |
|----|----|----|----|----|----|
| E.g. 15/07/2025 | MS Copilot | To help create an organised essay structure | ‘Generate ideas for structuring an essay on...’ | \[insert link\] | introduction |
|  |  |  |  |  |  |
|  |  |  |  |  |  |
|  |  |  |  |  |  |
|  |  |  |  |  |  |
|  |  |  |  |  |  |
|  |  |  |  |  |  |
|  |  |  |  |  |  |
|  |  |  |  |  |  |
